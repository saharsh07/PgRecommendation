{% extends 'adminDashboard.html' %}

{% block content %}

            <!-- ============================================================== -->
            <!-- Container fluid  -->
            <!-- ============================================================== -->
             <div class="container-fluid">
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body">
                                <h3 class="card-title float-left" >All Rooms</h3>
                                    <a class="btn btn-light text-light float-right" style="background-color: rgb(220, 53, 69);border: none;height: 38px;" href="{{ url_for('pgo.viewpg') }}" role="button"><i class="fas fa-arrow-circle-left"></i> Go Back</a>
                                   
                                <button type="button" class="btn btn-success float-right" data-toggle="modal" data-target="#addroom"><i class="far fa-plus-square"></i> &nbsp;Add New Room</button><br><br>

                              
                                 
                                <!-- Modal -->
                                    <div class="modal fade" id="addroom" tabindex="-1" role="dialog" aria-labelledby="addroom" aria-hidden="true">
                                      <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                                        <div class="modal-content">
                                           <form method="POST" action="{{ url_for('pgo.rooms') }}">
                                          <div class="modal-header">
                                            <h5 class="modal-title" id="addroom">Add New Room</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                              <span aria-hidden="true">&times;</span>
                                            </button>
                                          </div>
                                          <div class="modal-body">
                                           <form>
                                              <div class="form-group row">
                                                <label for="totalbed" class="col-md-6 col-form-label">Total Beds in Room</label>
                                                <div class="col-md-6">
                                                  <input type="number" name="total_beds"  class="form-control" id="totalbed" >
                                                </div>
                                              </div>
                                              <div class="form-group row">
                                                <label for="availbed" class="col-md-6 col-form-label">Vacant beds in room</label>
                                                <div class="col-md-6">
                                                  <input type="number" name="vacant_beds" class="form-control" id="availbed">
                                                </div>
                                              </div>
                                              <div class="form-group row">
                                                <label for="rentM1" class="col-md-6 col-form-label">Room Rent</label>
                                                <div class="col-md-6">
                                                  <input type="text" name="room_rent" class="form-control" id="rentM1" >
                                                </div>
                                              </div>
                                               
                                               <div class="form-group row">
                                                <label for="tokenM1" class="col-md-6 col-form-label">Token Amount</label>
                                                <div class="col-md-6">
                                                  <input type="text" name="token_amount" class="form-control" id="tokenM1" readonly  onclick="calculateRent()" onfocus="calculateRent()">
                                                </div>
                                                </div>
                                               

                                              <div class="form-group row">
                                                <div class="col-md-6">Air conditioner</div>
                                                <div class="col-md-2">
                                                  <div class="form-check">
                                                    <input class="form-check-input" name="amenities" value="ac" type="checkbox" id="ac">
                                                  </div>
                                                </div>
                                              </div>
                                               <div class="form-group row">
                                                <div class="col-md-6">Personal Television</div>
                                                <div class="col-md-2">
                                                  <div class="form-check">
                                                    <input class="form-check-input" name="amenitiesTV" value="tv" type="checkbox" id="tv">
                                                  </div>
                                                </div>
                                              </div>

                                               <div class="form-group row">
                                                <div class="col-md-3">Room Images</div>
                                                <div class="col-md-9">
                                                  <div class="custom-file">
                                                    <input type="file" class="custom-file-input" id="customFile">
                                                    <label class="custom-file-label" for="customFile">Choose files</label>
                                                  </div>
                                                </div>
                                              </div>



                                          </div>
                                          <div class="modal-footer">
                                            <button type="button" data-dismiss="modal" class="btn btn-danger" >Close</button>
                                            <button type="reset" class="btn btn-secondary" >Clear</button>
                                            <button type="submit" name="submit" value="{{ pgid }}" class="btn btn-primary" >Save changes</button>
                                          </div>
                                        </form>
                                        </div>
                                      </div>
                                    </div>

                                    {% for items in data %}

                                <div class="card text-left" style=" box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);">
                                      <div class="row no-gutters">
                                        <div class="col-4">
                                            <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                                              <ol class="carousel-indicators">
                                                <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                                                <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                                                <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                                              </ol>
                                              <div class="carousel-inner">
                                                <div class="carousel-item active">
                                                  <img class="d-block w-100"  height="320px" src="https://mittrisem.s3.amazonaws.com/pg_images/room_images_1.jpg" alt="First slide">
                                                </div>
                                                <div class="carousel-item">
                                                  <img class="d-block w-100" height="320px" src="https://mittrisem.s3.amazonaws.com/pg_images/room_images_2.jpg" alt="Second slide">
                                                </div>
                                                <div class="carousel-item">
                                                  <img class="d-block w-100" height="320px" src="https://mittrisem.s3.amazonaws.com/pg_images/room_images_3.jpg" alt="Third slide">
                                                </div>
                                              </div>
                                              <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                                <span class="sr-only">Previous</span>
                                              </a>
                                              <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                                <span class="sr-only">Next</span>
                                              </a>
                                            </div>
                                        </div>

                                        <div class="col-8" >
                                           <!-- <div class="card-header" style="background-color: black; color:white;"><h3>Royal Paying Guest</h3></div> -->
                                          <form method="POST" action="{{url_for('pgo.updaterooms')}}">
                                            <div class="card-body">
                                                Total Beds : {{ items['total_beds'] }} <br><br>
                                                Vacant Beds : {{ items['avail_beds'] }} <br><br>
                                                {% if items['AC'] == '1' %}
                                                  Air Conditioner : <i class="fas fa-check-circle" style="color:#28a745"></i> <br><br>
                                                {% else %}
                                                  Air Conditioner : <i class="fas fa-times-circle" style="color:rgb(223, 53, 69)"></i> <br><br>
                                                {% endif %}
                                                {% if items['TV'] == '1' %}
                                                  Personal Television : <i class="fas fa-check-circle" style="color:#28a745"></i> <br><br>
                                                {% else %}
                                                  Personal Television : <i class="fas fa-times-circle" style="color:rgb(223, 53, 69)"></i> <br><br>
                                                {% endif %}
                                                 
                                                Room Rent: Rs {{ items['rent'] }} <br><br>
                                                Token Amount : Rs {{ items['token_amt'] }}

                                            </div>
                                        </div>
                                      </div>
                                      
                                    <div class="card-footer text-right" style="background-color: black">
                                      {% if items['rhidden'] == "yes"%}
                                      <!-- HIDE ROOM MODAL -->
                                      <button type="button" class="btn btn-warning" data-toggle="modal" data-target="#hidemodal{{ items['RID'] }}">Hidden</button>

                                      <!-- The Modal -->
                                      <div class="modal fade" id="hidemodal{{ items['RID'] }}">
                                        <div class="modal-dialog modal-dialog-centered">
                                          <div class="modal-content">

                                            <!-- Modal Header -->
                                            <div class="modal-header">
                                              <h4 class="modal-title">Confirmation!</h4>
                                              <button type="button" class="close" data-dismiss="modal">&times;</button>
                                            </div>

                                            <!-- Modal body -->
                                            <div class="modal-body">
                                                <p style="color: black; font-size: 24px;"> Are you sure you want to unhide this Room?</p>
                                            </div>

                                            <!-- Modal footer -->
                                            <div class="modal-footer">
                                              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                              <input type="text" name="pgid" value="{{ items['PGID']}}" hidden>
                                              <button type="submit" class="btn btn-primary" value="{{items['RID']}}" name="unhideroom">Yes</button>
                                            </div>

                                          </div>
                                        </div>
                                      </div>
                                      {% else %}
                                       <!-- HIDE ROOM MODAL -->
                                      <button type="button" class="btn btn-warning" data-toggle="modal" data-target="#hidemodal1{{ items['RID'] }}">Hide Room</button>

                                      <!-- The Modal -->
                                      <div class="modal fade" id="hidemodal1{{ items['RID'] }}">
                                        <div class="modal-dialog modal-dialog-centered">
                                          <div class="modal-content">

                                            <!-- Modal Header -->
                                            <div class="modal-header">
                                              <h4 class="modal-title">Confirmation!</h4>
                                              <button type="button" class="close" data-dismiss="modal">&times;</button>
                                            </div>

                                            <!-- Modal body -->
                                            <div class="modal-body">
                                                <p style="color: black; font-size: 24px;"> Are you sure you want to hide this Room?</p>
                                            </div>

                                            <!-- Modal footer -->
                                            <div class="modal-footer">
                                              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                              <input type="text" name="pgid" value="{{ items['PGID']}}" hidden>
                                              <button type="submit" name="hideroom" class="btn btn-primary" value="{{items['RID']}}" >Yes</button>
                                            </div>

                                          </div>
                                        </div>
                                      </div>
                                      {%endif%}


                                      <!-- Delete Room Modal-->
                                      <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#delmodal{{ items['RID'] }}">Delete Room</button>

                                      <!-- The Modal -->
                                      <div class="modal fade" id="delmodal{{ items['RID'] }}">
                                        <div class="modal-dialog modal-dialog-centered">
                                          <div class="modal-content">

                                            <!-- Modal Header -->
                                            <div class="modal-header">
                                              <h4 class="modal-title">Confirmation!</h4>
                                              <button type="button" class="close" data-dismiss="modal">&times;</button>
                                            </div>

                                            <!-- Modal body -->
                                            <div class="modal-body">
                                                <p style="color: black; font-size: 22px;"> Are you sure you want to Delete this Room?</p>
                                            </div>

                                            <!-- Modal footer -->
                                            <div class="modal-footer">
                                              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                              <input type="text" name="pgid" value="{{ items['PGID']}}" hidden>
                                              <button type="submit" class="btn btn-primary" value="{{items['RID']}}" name="deleteroom" >Yes</button>
                                            </div>

                                          </div>
                                        </div>
                                      </div>

                                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#updtroom{{ items['RID'] }}">Update Room Details</button>

                                    <!-- Modal -->
                                    <div class="modal fade" id="updtroom{{ items['RID'] }}" tabindex="-1" role="dialog" aria-labelledby="updtroom" aria-hidden="true">
                                      <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                                        <div class="modal-content">
                                          <form>
                                          <div class="modal-header">
                                            <h5 class="modal-title" id="addroom">Update Room Details</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                              <span aria-hidden="true">&times;</span>
                                            </button>
                                          </div>
                                          <div class="modal-body">
                                              <div class="form-group row">
                                                <label for="totalbed" class="col-md-6 col-form-label" style="text-align:left;">Total Beds in Room</label>
                                                <div class="col-md-6">
                                                  <input type="number" name="totalbed" class="form-control" id="totalbed" value="{{items['total_beds']}}">
                                                </div>
                                              </div>
                                              <div class="form-group row">
                                                <label for="availbed" class="col-md-6 col-form-label" style="text-align:left;">Vacant beds in room</label>
                                                <div class="col-md-6">
                                                  <input type="number" name="availbed" class="form-control" id="availbed" value="{{ items['avail_beds']}}">
                                                </div>
                                              </div>
                                              <div class="form-group row">
                                                <label for="rentM1" class="col-md-6 col-form-label" style="text-align:left;">Room Rent</label>
                                                <div class="col-md-6">
                                                  <input type="text" name="rent" class="form-control" id="rentM1" value="{{items['rent']}}">
                                                </div>
                                              </div>
                                              
                                              <div class="form-group row">
                                                <label for="tokenM1" class="col-md-6 col-form-label" style="text-align:left;">Token Amount</label>
                                                <div class="col-md-6">
                                                  <input type="text" name="token_amt" class="form-control" id="tokenM1" value="{{items['token_amt']}}" readonly  onclick="calculateRent()" onfocus="calculateRent()">
                                                </div>
                                                </div>
                                              

                                              <div class="form-group row">
                                                <div class="col-md-6" style="text-align:left;">Air conditioner</div>
                                                <div class="col-md-1">
                                                  <div class="form-check">
                                                    {% if items['AC'] == "1" %}
                                                    <input class="form-check-input" name="ac" type="checkbox" checked>
                                                    {%else%}
                                                    <input class="form-check-input" name="ac" type="checkbox">
                                                    {%endif%}
                                                  </div>
                                                </div>
                                              </div>
                                              <div class="form-group row">
                                                <div class="col-md-6" style="text-align:left;">Personal Television</div>
                                                <div class="col-md-1">
                                                  <div class="form-check">
                                                    {% if items['TV'] == "1" %}
                                                    <input class="form-check-input" name="tv" type="checkbox" checked>
                                                    {%else%}
                                                    <input class="form-check-input" name="tv" type="checkbox">
                                                    {%endif%}
                                                  </div>
                                                </div>
                                              </div>

                                              <div class="form-group row">
                                                <div class="col-md-3" style="text-align:left;">Room Images</div>
                                                <div class="col-md-9">
                                                  <div class="custom-file">
                                                    <input type="file" class="custom-file-input" id="customFile">
                                                    <label class="custom-file-label" for="customFile" style="text-align: left;">Choose files</label>
                                                  </div>
                                                </div>
                                              </div>
                                          </div>
                                          <div class="modal-footer">
                                            <button type="reset" class="btn btn-secondary" >Clear</button>
                                            <input type="text" name="pgid" value="{{ items['PGID']}}" hidden>
                                              <button type="submit" class="btn btn-primary" value="{{items['RID']}}" name="updateroom" >Yes</button>
                                          </div>
                                        </form>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>


                                </div><!-- card end -->
{% endfor %}
             <br><br>



                            </div>
                        </div>
                    </div>
                </div>
             </div>
<script>
  function calculateRent(){
    amount = document.getElementById('rentM1').value;
    amount = parseInt(amount);
    amount = parseInt(amount*0.3);
    document.getElementById("tokenM1").value = amount;
  }
  </script>

{% endblock %}